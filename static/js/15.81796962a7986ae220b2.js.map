{"version":3,"sources":["webpack:///src/components/minesweeper/minesweeper.vue","webpack:///./src/components/minesweeper/minesweeper.vue?e3fa","webpack:///./src/components/minesweeper/minesweeper.vue"],"names":["__webpack_exports__","name","data","falseData","isDialogShow","config","blockSize","difficulty","width","height","mines","blocks","isGenerate","flagNumber","startTime","mounted","methods","start","_this","this","$alert","Date","$","css","i","j","push","index","row","col","mine","number","open","flag","$nextTick","generate","safeIndex","that","_i","Math","floor","random","_i2","_some","_j","_index","click","quickOpen","_this2","isWin","diff","getTime","callback","some","result","watch","config.difficulty","val","oldVal","minesweeper_minesweeper","render","_vm","_h","$createElement","_c","_self","attrs","id","_l","item","key","staticClass","on","$event","type","indexOf","_k","keyCode","button","contextmenu","_v","_s","title","center","visible","show-close","close-on-click-modal","close-on-press-escape","update:visible","label-width","label","min","step","model","value","$$v","$set","expression","disabled","slot","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","minesweeper"],"mappings":"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","file":"static/js/15.81796962a7986ae220b2.js","sourcesContent":["<template>\n  <div id=\"content\">\n    <div id=\"minefield\">\n      <div class=\"block\" v-for=\"item in blocks\" :key=\"item.index\" :index=\"item.index\"\n           @click.left=\"click(item.index, item.row, item.col)\"\n           @click.right=\"flag(item.index, item.row, item.col)\">\n        <div class=\"innerBlock flagBlock\" v-if=\"item.flag\"><i class=\"el-icon-location-outline\"></i></div>\n        <div class=\"innerBlock closeBlock\" v-else-if=\"!item.open\"></div>\n        <div class=\"innerBlock mineBlock\" v-else-if=\"item.mine==1\"><i class=\"el-icon-close\"></i></div>\n        <div class=\"innerBlock\" v-else>{{item.number==0 ? '' : item.number}}</div>\n      </div>\n    </div>\n    <div>{{flagNumber}} / {{config.mines}}</div>\n    <el-dialog\n      title=\"新游戏\"\n      center\n      :visible.sync=\"isDialogShow\"\n      width=\"500px\"\n      :show-close=\"falseData\"\n      :close-on-click-modal=\"falseData\"\n      :close-on-press-escape=\"falseData\">\n      <el-form label-width=\"80px\">\n        <el-form-item label=\"格子大小\">\n          <el-input-number v-model=\"config.blockSize\" :min=\"10\" :step=\"5\"></el-input-number>\n        </el-form-item>\n        <el-form-item label=\"难度\">\n          <el-radio-group v-model=\"config.difficulty\">\n            <el-radio :label=\"1\">简单</el-radio>\n            <el-radio :label=\"2\">中等</el-radio>\n            <el-radio :label=\"3\">困难</el-radio>\n            <el-radio :label=\"4\">自定义</el-radio>\n          </el-radio-group>\n          <div>\n            <div class=\"dialogRow\">\n              <span class=\"dialogRowLabel\">宽</span><el-input-number :disabled=\"config.difficulty!==4\" v-model=\"config.width\" :min=\"10\"></el-input-number>\n            </div>\n            <div class=\"dialogRow\">\n              <span class=\"dialogRowLabel\">高</span><el-input-number :disabled=\"config.difficulty!==4\" v-model=\"config.height\" :min=\"10\"></el-input-number>\n            </div>\n            <div class=\"dialogRow\">\n              <span class=\"dialogRowLabel\">雷</span><el-input-number :disabled=\"config.difficulty!==4\" v-model=\"config.mines\" :min=\"1\"></el-input-number>\n            </div>\n          </div>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"\">\n        <el-button type=\"primary\" @click=\"start()\">开始</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n  #content{\n    width: 100vw;\n    height: 100vh;\n    display: flex;\n    flex-flow: column nowrap;\n    align-items: center;\n    justify-content: center;\n    #minefield{\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n      display: flex;\n      flex-flow: row wrap;\n      .block{\n        text-align: center;\n        border-top: 1px solid black;\n        border-left: 1px solid black;\n        box-sizing: border-box;\n        cursor: default;\n        .innerBlock{\n          width: 100%;\n          height: 100%;\n          font-size: 20px;\n        }\n        .flagBlock{\n          background-color: #ccc;\n        }\n        .closeBlock{\n          background-color: #ccc;\n        }\n        .mineBlock{\n          color: red;\n        }\n      }\n    }\n    .el-form-item /deep/ .el-form-item__label{\n      padding-right: 20px;\n    }\n    .dialogRow{\n      margin: 10px 0;\n      .dialogRowLabel{\n        margin-right: 20px;\n      }\n    }\n  }\n</style>\n\n<script>\n  export default {\n    name: 'minesweeper',\n    data () {\n      return {\n        falseData: false,\n        isDialogShow: true,\n        config: {\n          blockSize: 40,\n          difficulty: 1,\n          width: 10,\n          height: 10,\n          mines: 10\n        },\n        blocks: [],\n        isGenerate: false,\n        flagNumber: 0,\n        startTime: null,\n      }\n    },\n    mounted: function () {\n      let that = this;\n    },\n    methods: {\n      start(){\n        if(this.config.mines > this.config.width * this.config.height / 2){\n          this.$alert(\"雷密度不能超过50%\");\n          return;\n        }\n\n        this.isDialogShow = false;\n        this.isGenerate = false;\n        this.flagNumber = 0;\n        this.startTime = new Date();\n\n        //调整雷区的宽高\n        $(\"#minefield\").css(\"width\", this.config.width * this.config.blockSize + \"px\")\n          .css(\"height\", this.config.height * this.config.blockSize + \"px\");\n\n        //生成blocks\n        this.blocks = [];\n        for(let i=0;i<this.config.height;i++){\n          for(let j=0;j<this.config.width;j++){\n            this.blocks.push({\n              index: i*this.config.width+j,\n              row: i,\n              col: j,\n              mine: 0,\n              number: 0,\n              open: false,\n              flag: false,\n            });\n          }\n        }\n\n        this.$nextTick(() => {\n          $(\".block\").css(\"width\", this.config.blockSize + \"px\")\n            .css(\"height\", this.config.blockSize + \"px\")\n            .css(\"line-height\", this.config.blockSize + \"px\");\n        });\n      },\n      generate(safeIndex){\n        let that = this;\n        do{\n          //清空雷区\n          this.blocks = [];\n          for(let i=0;i<this.config.height;i++){\n            for(let j=0;j<this.config.width;j++){\n              this.blocks.push({\n                index: i*this.config.width+j,\n                row: i,\n                col: j,\n                mine: 0,\n                number: 0,\n                open: false,\n                flag: false,\n              });\n            }\n          }\n\n          //布雷\n          for(let i=0;i<this.config.mines;i++){\n            let index = 0;\n            do{\n              index = Math.floor(Math.random()*this.config.width*this.config.height);\n            } while (this.blocks[index].mine==1);\n            this.blocks[index].mine = 1;\n          }\n\n          //计算number\n          for(let i=0;i<this.config.height;i++){\n            for(let j=0;j<this.config.width;j++){\n              let index = i*this.config.width+j;\n              if(this.blocks[index].mine==0){\n                this.blocks[index].number +=\n                  some(i, j-1)\n                  + some(i, j+1)\n                  + some(i-1, j-1)\n                  + some(i-1, j)\n                  + some(i-1, j+1)\n                  + some(i+1, j-1)\n                  + some(i+1, j)\n                  + some(i+1, j+1);\n              }\n            }\n            function some(i, j) {\n              if(i < 0 || i > that.config.height -1) return 0;\n              if(j < 0 || j > that.config.width -1) return 0;\n              return that.blocks[i*that.config.width+j].mine;\n            }\n          }\n        } while(this.blocks[safeIndex].number!=0 || this.blocks[safeIndex].mine!=0);\n      },\n      click(index, row, col){\n        if(!this.isGenerate){\n          //第一次点击，再布雷，保证第一次点开是0\n          this.generate(index);\n          this.isGenerate = true;\n          this.click(index, row, col);\n        } else {\n          if(!this.blocks[index].flag){\n            if(!this.blocks[index].open){\n              //如果没打开，则打开\n              this.open(row, col);\n            } else {\n              //如果已经打开，执行快速打开\n              this.quickOpen(row, col);\n            }\n          }\n        }\n      },\n      open(i, j){\n        let index = i*this.config.width+j;\n        if(i < 0 || i > this.config.height -1) return 0;\n        if(j < 0 || j > this.config.width -1) return 0;\n        if(this.blocks[index].flag)\n          return;\n        if(this.blocks[index].open)\n          return;\n        if(this.blocks[index].mine>0){\n          this.$alert(\"GG\");\n        } else {\n          this.blocks[index].open = true;\n          if(this.blocks[index].number==0){\n            this.open(i, j-1);\n            this.open(i, j+1);\n            this.open(i-1, j-1);\n            this.open(i-1, j);\n            this.open(i-1, j+1);\n            this.open(i+1, j-1);\n            this.open(i+1, j);\n            this.open(i+1, j+1);\n          }\n          if(this.isWin()){\n            let endTime = new Date();\n            let diff = (endTime.getTime() - this.startTime.getTime()) / 1000;\n            this.$alert(\"Win! Your score: \" + diff + \" s\", {\n              callback: () => {\n                this.isDialogShow = true;\n              }\n            });\n          }\n        }\n      },\n      quickOpen(i, j){\n        let that = this;\n        let index = i*this.config.width+j;\n        let number = this.blocks[index].number;\n        let flagNumber = 0;\n        flagNumber +=\n          some(i, j-1)\n          + some(i, j+1)\n          + some(i-1, j-1)\n          + some(i-1, j)\n          + some(i-1, j+1)\n          + some(i+1, j-1)\n          + some(i+1, j)\n          + some(i+1, j+1);\n        if(number == flagNumber){\n          //如果两个数相等，则等价于打开周围8块\n          this.open(i, j-1);\n          this.open(i, j+1);\n          this.open(i-1, j-1);\n          this.open(i-1, j);\n          this.open(i-1, j+1);\n          this.open(i+1, j-1);\n          this.open(i+1, j);\n          this.open(i+1, j+1);\n        }\n        function some(i, j) {\n          if(i < 0 || i > that.config.height -1) return 0;\n          if(j < 0 || j > that.config.width -1) return 0;\n          return that.blocks[i*that.config.width+j].flag ? 1 : 0;\n        }\n      },\n      isWin(){\n        let result = true;\n        for(let index in this.blocks){\n          if(this.blocks[index].mine==0 && !this.blocks[index].open){\n            result = false;\n            break;\n          }\n        }\n        return result;\n      },\n      flag(index, row, col){\n        if(this.isGenerate && !this.blocks[index].open){\n          this.flagNumber += this.blocks[index].flag ? -1 : 1;\n          this.blocks[index].flag = !this.blocks[index].flag;\n        }\n      }\n    },\n    watch: {\n      \"config.difficulty\": function (val, oldVal) {\n        if(val===1){\n          this.config.width=10;\n          this.config.height=10;\n          this.config.mines=10;\n        } else if(val===2){\n          this.config.width=16;\n          this.config.height=16;\n          this.config.mines=40;\n        } else if(val===3){\n          this.config.width=30;\n          this.config.height=16;\n          this.config.mines=99;\n        }\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/minesweeper/minesweeper.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"content\"}},[_c('div',{attrs:{\"id\":\"minefield\"}},_vm._l((_vm.blocks),function(item){return _c('div',{key:item.index,staticClass:\"block\",attrs:{\"index\":item.index},on:{\"click\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.click(item.index, item.row, item.col)},\"contextmenu\":function($event){return _vm.flag(item.index, item.row, item.col)}}},[(item.flag)?_c('div',{staticClass:\"innerBlock flagBlock\"},[_c('i',{staticClass:\"el-icon-location-outline\"})]):(!item.open)?_c('div',{staticClass:\"innerBlock closeBlock\"}):(item.mine==1)?_c('div',{staticClass:\"innerBlock mineBlock\"},[_c('i',{staticClass:\"el-icon-close\"})]):_c('div',{staticClass:\"innerBlock\"},[_vm._v(_vm._s(item.number==0 ? '' : item.number))])])}),0),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.flagNumber)+\" / \"+_vm._s(_vm.config.mines))]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"新游戏\",\"center\":\"\",\"visible\":_vm.isDialogShow,\"width\":\"500px\",\"show-close\":_vm.falseData,\"close-on-click-modal\":_vm.falseData,\"close-on-press-escape\":_vm.falseData},on:{\"update:visible\":function($event){_vm.isDialogShow=$event}}},[_c('el-form',{attrs:{\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"格子大小\"}},[_c('el-input-number',{attrs:{\"min\":10,\"step\":5},model:{value:(_vm.config.blockSize),callback:function ($$v) {_vm.$set(_vm.config, \"blockSize\", $$v)},expression:\"config.blockSize\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"难度\"}},[_c('el-radio-group',{model:{value:(_vm.config.difficulty),callback:function ($$v) {_vm.$set(_vm.config, \"difficulty\", $$v)},expression:\"config.difficulty\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"简单\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"中等\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"困难\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":4}},[_vm._v(\"自定义\")])],1),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"dialogRow\"},[_c('span',{staticClass:\"dialogRowLabel\"},[_vm._v(\"宽\")]),_c('el-input-number',{attrs:{\"disabled\":_vm.config.difficulty!==4,\"min\":10},model:{value:(_vm.config.width),callback:function ($$v) {_vm.$set(_vm.config, \"width\", $$v)},expression:\"config.width\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialogRow\"},[_c('span',{staticClass:\"dialogRowLabel\"},[_vm._v(\"高\")]),_c('el-input-number',{attrs:{\"disabled\":_vm.config.difficulty!==4,\"min\":10},model:{value:(_vm.config.height),callback:function ($$v) {_vm.$set(_vm.config, \"height\", $$v)},expression:\"config.height\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialogRow\"},[_c('span',{staticClass:\"dialogRowLabel\"},[_vm._v(\"雷\")]),_c('el-input-number',{attrs:{\"disabled\":_vm.config.difficulty!==4,\"min\":1},model:{value:(_vm.config.mines),callback:function ($$v) {_vm.$set(_vm.config, \"mines\", $$v)},expression:\"config.mines\"}})],1)])],1)],1),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.start()}}},[_vm._v(\"开始\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0144ca17\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/minesweeper/minesweeper.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0144ca17\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./minesweeper.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./minesweeper.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./minesweeper.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0144ca17\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./minesweeper.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0144ca17\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/minesweeper/minesweeper.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}